clear;
h=0.001;
n=1/h;
x=0:h:1;
f=@(x)3;
%%%%%
A=zeros(n-1,n-1);
A(1,1)=(4/h)+(2*h);
A(1,2)=-2/h;
y(1)=(h*f(x(2)))-(2/h);
for i=2:499
    A(i,i-1)=-2/h;
    A(i,i)=(4/h)+(2*h);
    A(i,i+1)=-2/h;
    y(i)=h*f(x(i+1));
end
%%%%%%
A(500,499)=(4/h)+(4*h);
A(500,500)=(3/h)+(3*h);
A(500,501)=(1/h)+h;
y(500)=h*f(x(501));
%%%%%
for i=501:n-2
    A(i,i-1)=-1/h;
    A(i,i)=(2/h)+h;
    A(i,i+1)=-1/h;
    y(i)=h*f(x(i+1));
end
%%%%%%%
A(n-1,n-2)=-1/h;
A(n-1,n-1)=(2/h)+h;
y(n-1)=h*f(x(n))+1/h;
%%%%%
u=A\y';
%%%%%
plot(x,[1;u;1])
xlabel('x')
ylabel('u')
grid on